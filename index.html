<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ramadan Quran Tracker</title>
  
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    * { font-family: 'Plus Jakarta Sans', sans-serif; }
    :root { 
      --primary: #2E2A8C; 
      --accent: #2A2780; 
      --gold: #D4AF37;
      --bg: #f8fafc; 
      --surface: #ffffff;
      --border: #f1f5f9;
    }
    body { background-color: var(--bg); color: #1e293b; }
    
    .glass-nav {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }
    
    .card-dashboard {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .card-dashboard:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px -10px rgba(0, 0, 0, 0.05);
    }

    .input-field {
      border: 1.5px solid #e2e8f0;
      border-radius: 12px;
      transition: all 0.2s;
    }

    .input-field:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(46, 42, 140, 0.1);
      outline: none;
    }

    .nav-tab {
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.2s;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tab-active {
      background-color: var(--primary);
      color: white;
      box-shadow: 0 4px 12px rgba(46, 42, 140, 0.25);
    }

    .tab-inactive {
      color: #64748b;
    }

    .tab-inactive:hover {
      background-color: #f1f5f9;
      color: #1e293b;
    }

    .header-gradient {
      background: linear-gradient(135deg, var(--accent) 0%, var(--primary) 100%);
    }

    .filter-chip {
      padding: 6px 16px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      border: 1px solid #e2e8f0;
    }
    .filter-active {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    .filter-inactive {
      background-color: white;
      color: #64748b;
    }

    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    .btn-pagination {
      padding: 8px 16px;
      border-radius: 10px;
      font-size: 0.75rem;
      font-weight: 700;
      transition: all 0.2s;
      background: #fff;
      border: 1px solid #e2e8f0;
      color: #64748b;
    }
    .btn-pagination:hover:not(:disabled) {
      background: #f8fafc;
      color: var(--primary);
      border-color: var(--primary);
    }
    .btn-pagination:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
      color: white;
      border-radius: 14px;
    }

    .text-primary-theme { color: var(--primary); }
    .text-gold-theme { color: var(--gold); }
    .bg-emerald-theme { background-color: #ecfdf5; color: #10b981; } 
    .progress-bar-theme { background-color: var(--gold); }

    /* Pop-up Styles */
    #welcome-popup {
      transition: all 0.4s ease-out;
    }
    .popup-content {
      transform: scale(0.9);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    #welcome-popup.active .popup-content {
      transform: scale(1);
    }
  </style>
</head>
<body class="h-full">
  <div id="welcome-popup" class="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm opacity-0 pointer-events-none">
    <div class="popup-content bg-white w-full max-w-sm rounded-[32px] p-8 text-center shadow-2xl border border-slate-100">
      <div class="w-20 h-20 bg-amber-50 text-gold-theme rounded-full flex items-center justify-center mx-auto mb-6 shadow-inner">
        <i class="fas fa-moon text-3xl"></i>
      </div>
      <h2 class="text-2xl font-extrabold text-slate-800 mb-2">Selamat Datang Kembali!</h2>
      <p class="text-slate-500 leading-relaxed mb-8">
        "Bacalah Al-Quran, karena ia akan datang pada hari kiamat sebagai syafaat bagi pembacanya." <br>
        <span class="block mt-4 font-bold text-primary-theme italic">Semangat tilawah di bulan yang penuh berkah ini! ✨</span>
      </p>
      <button onclick="closePopup()" class="btn-primary w-full py-4 font-bold text-lg shadow-xl active:scale-95 transition-transform">
        Mulai Mencatat
      </button>
    </div>
  </div>

  <div class="min-h-screen pb-24">
    <header class="header-gradient pt-10 pb-20 px-6 text-center text-white shadow-lg">
      <div class="max-w-4xl mx-auto">
        <div class="inline-flex items-center justify-center p-2 bg-white rounded-2xl mb-4 backdrop-blur-sm shadow-md">
          <img src="https://stiba.ac.id/wp-content/uploads/2025/07/IAI-STIBA-Makassar-Logo-berwarna-teks-indo.png" 
               alt="Logo IAI STIBA Makassar" 
               class="h-16 w-auto object-contain">
        </div>
        <h1 class="text-3xl font-extrabold tracking-tight">Ramadan Quran Hub</h1>
        <p class="text-white/80 mt-2 opacity-90 font-medium">Monitoring Progres Tilawah Harian</p>
      </div>
    </header>

    <nav class="glass-nav sticky top-4 mx-4 md:mx-auto max-w-2xl mt-[-32px] p-2 rounded-2xl border border-white/50 shadow-xl z-50 overflow-x-auto no-scrollbar">
      <div class="flex items-center justify-between gap-1 min-w-max">
        <div onclick="showSection('dashboard')" id="tab-dashboard" class="nav-tab tab-active">
          <i class="fas fa-chart-pie"></i> Dashboard
        </div>
        <div onclick="showSection('form')" id="tab-form" class="nav-tab tab-inactive">
          <i class="fas fa-plus-circle"></i> Lapor
        </div>
        <div onclick="showSection('leaderboard')" id="tab-leaderboard" class="nav-tab tab-inactive">
          <i class="fas fa-award"></i> Peringkat
        </div>
        <div onclick="showSection('history')" id="tab-history" class="nav-tab tab-inactive">
          <i class="fas fa-history"></i> Riwayat
        </div>
      </div>
    </nav>

    <main class="max-w-4xl mx-auto px-6 mt-8">
      <section id="section-dashboard" class="space-y-6 animate-in fade-in duration-500">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <div class="card-dashboard p-6 flex flex-col items-center justify-center text-center">
            <span class="p-3 bg-slate-50 text-primary-theme rounded-xl mb-3"><i class="fas fa-file-signature text-xl"></i></span>
            <div id="stat-total" class="text-3xl font-bold text-slate-800">0</div>
            <div class="text-xs font-bold text-slate-400 uppercase tracking-widest mt-1">Total Laporan</div>
          </div>
          <div class="card-dashboard p-6 flex flex-col items-center justify-center text-center border-b-4 border-b-gold-theme" style="border-bottom-color: var(--gold);">
            <span class="p-3 bg-amber-50 text-gold-theme rounded-xl mb-3"><i class="fas fa-crown text-xl"></i></span>
            <div id="stat-khatam" class="text-3xl font-bold text-slate-800">0</div>
            <div class="text-xs font-bold text-slate-400 uppercase tracking-widest mt-1">Peserta Khatam</div>
          </div>
          <div class="card-dashboard p-6 flex flex-col items-center justify-center text-center">
            <span class="p-3 bg-blue-50 text-primary-theme rounded-xl mb-3"><i class="fas fa-calendar-check text-xl"></i></span>
            <div id="stat-today" class="text-3xl font-bold text-slate-800">0</div>
            <div class="text-xs font-bold text-slate-400 uppercase tracking-widest mt-1">Laporan Hari Ini</div>
          </div>
        </div>

        <div class="card-dashboard p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-bold text-slate-700 flex items-center gap-2">
              <i class="fas fa-tasks text-primary-theme"></i> Progres Keseluruhan
            </h3>
            <span id="prog-pct" class="text-sm font-bold text-primary-theme bg-slate-50 px-3 py-1 rounded-full">0%</span>
          </div>
          <div class="h-4 bg-slate-100 rounded-full overflow-hidden">
            <div id="prog-bar" class="h-full progress-bar-theme transition-all duration-1000 ease-out shadow-[0_0_12px_rgba(212,175,55,0.4)]" style="width:0%"></div>
          </div>
        </div>

        <div class="card-dashboard p-6">
          <div class="flex items-center justify-between mb-5">
            <h3 class="font-bold text-slate-700 flex items-center gap-2">
              <i class="fas fa-bolt text-gold-theme"></i> Laporan Terbaru
            </h3>
            <div id="recent-pagination" class="flex items-center gap-2"></div>
          </div>
          <div id="recent-list" class="space-y-4 text-sm"></div>
        </div>
      </section>

      <section id="section-form" class="hidden animate-in slide-in-from-bottom-4 duration-500">
        <div class="card-dashboard p-8 max-w-xl mx-auto shadow-2xl">
          <div class="text-center mb-8">
            <h2 class="text-2xl font-bold text-slate-800">Input Tilawah</h2>
            <p class="text-slate-400 text-sm mt-1">Lengkapi data bacaan harian Anda</p>
          </div>
          <form id="report-form" class="space-y-5">
            <div class="space-y-1">
              <label class="text-xs font-bold text-slate-500 uppercase ml-1">Nama Lengkap</label>
              <select id="f-nama" required class="input-field w-full p-4 bg-white text-slate-700 font-medium cursor-pointer">
                <option value="">Pilih Nama...</option>
              </select>
            </div>
            <div class="space-y-1">
              <label class="text-xs font-bold text-slate-500 uppercase ml-1">Kelompok</label>
              <input type="text" id="f-klp" readonly class="input-field w-full p-4 bg-slate-50 text-slate-500 font-medium" placeholder="Otomatis terisi">
            </div>
            <div class="grid grid-cols-2 gap-4">
              <div class="space-y-1">
                <label class="text-xs font-bold text-slate-500 uppercase ml-1">Hari Ke-</label>
                <input type="number" id="f-hari" required class="input-field w-full p-4" placeholder="Contoh: 1">
              </div>
              <div class="space-y-1">
                <label class="text-xs font-bold text-slate-500 uppercase ml-1">Tanggal</label>
                <input type="date" id="f-tgl" required class="input-field w-full p-4">
              </div>
            </div>
            <div class="space-y-1">
              <label class="text-xs font-bold text-slate-500 uppercase ml-1">Jumlah Juz</label>
              <div class="relative">
                <input type="number" step="0.5" id="f-juz" required class="input-field w-full p-4 pl-12" placeholder="0.5 atau 1">
                <i class="fas fa-book-open absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
              </div>
            </div>
            <div class="space-y-1">
              <label class="text-xs font-bold text-slate-500 uppercase ml-1">Catatan Singkat</label>
              <textarea id="f-catatan" rows="2" class="input-field w-full p-4" placeholder="Opsional..."></textarea>
            </div>
            <button type="submit" id="f-btn" class="btn-primary w-full py-4 font-bold text-lg shadow-xl active:scale-95 transition-transform flex items-center justify-center gap-3">
              <i class="fas fa-paper-plane"></i> Kirim Laporan
            </button>
          </form>
        </div>
      </section>

      <section id="section-leaderboard" class="hidden space-y-4 animate-in fade-in duration-500">
         <div class="card-dashboard p-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6">
              <div class="flex items-center gap-3">
                <span class="p-3 bg-amber-50 text-gold-theme rounded-xl"><i class="fas fa-trophy"></i></span>
                <h2 class="text-xl font-bold text-slate-800">Papan Peringkat</h2>
              </div>
              <div class="flex items-center gap-2 bg-slate-100 p-1 rounded-xl w-fit">
                <div onclick="filterRank('all')" id="filter-all" class="filter-chip filter-active">Semua</div>
                <div onclick="filterRank('Ikhwah')" id="filter-Ikhwah" class="filter-chip filter-inactive">Ikhwah</div>
                <div onclick="filterRank('Akhwat')" id="filter-Akhwat" class="filter-chip filter-inactive">Akhwat</div>
              </div>
            </div>
            <div id="lb-list" class="space-y-1"></div>
         </div>
      </section>

      <section id="section-history" class="hidden space-y-4 animate-in fade-in duration-500">
         <div class="card-dashboard p-6">
            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 border-b pb-4">
              <div class="flex items-center gap-3">
                <span class="p-3 bg-slate-50 text-primary-theme rounded-xl"><i class="fas fa-clipboard-list"></i></span>
                <h2 class="text-xl font-bold text-slate-800">Semua Riwayat</h2>
              </div>
              <div class="flex items-center gap-2">
                <label class="text-xs font-bold text-slate-400 uppercase">Filter Tanggal:</label>
                <input type="date" id="history-date-filter" onchange="updateUI()" class="input-field p-2 text-xs font-semibold text-slate-600">
                <button onclick="resetHistoryFilter()" class="text-[10px] font-bold text-rose-500 hover:text-rose-700">RESET</button>
              </div>
            </div>
            <div id="history-pagination" class="flex justify-center items-center gap-4 mb-6"></div>
            <div id="hist-list" class="space-y-4"></div>
         </div>
      </section>
    </main>
  </div>

  <footer class="bg-white border-t border-slate-200 py-8 mt-12">
    <div class="max-w-4xl mx-auto px-6 text-center">
      <p class="text-slate-500 text-sm font-medium">
        Created by <br> <span class="text-primary-theme font-bold">Panitia Amaliah Ramadan IAI STIBA Makassar</span>
      </p>
      <p class="text-slate-400 text-[10px] uppercase tracking-widest mt-1">© 2026 • 1447 H</p>
    </div>
  </footer>

  <script>
    const WEB_URL = 'https://script.google.com/macros/s/AKfycby_hQWLOUkhMYETzOcFeo_OA4Tg7R7-2LkgYCVVVVC4Zia_qIkycUfD8YHrJ3Iuf17xdg/exec';
    let DB = [];
    let currentRankFilter = 'all';
    
    let recentPage = 1;
    let historyPage = 1;
    const itemsPerPage = 10;

    // Pop-up Functions
    function closePopup() {
      const popup = document.getElementById('welcome-popup');
      popup.classList.remove('opacity-100', 'active');
      popup.classList.add('opacity-0');
      setTimeout(() => { popup.classList.add('hidden'); }, 400);
    }

    function showPopup() {
      const popup = document.getElementById('welcome-popup');
      popup.classList.remove('hidden');
      setTimeout(() => {
        popup.classList.add('opacity-100', 'active', 'pointer-events-auto');
      }, 50);
    }

    function localISODate() { return new Date().toLocaleDateString('en-CA'); }
    function escapeHtml(t) { const d = document.createElement('div'); d.textContent = t; return d.innerHTML; }
    
    function formatDate(s) { 
      if(!s || s==='-') return '-';
      const cleanDate = s.split('T')[0];
      const p = cleanDate.split(/[-/]/); 
      let d;
      if (p[0].length === 4) { d = new Date(p[0], p[1]-1, p[2]); }
      else { d = new Date(2000 + parseInt(p[2]), p[0]-1, p[1]); }
      return d.toLocaleDateString('id-ID', {day:'numeric', month:'short'});
    }

    function showSection(name) {
      ['dashboard', 'form', 'leaderboard', 'history'].forEach(s => {
        document.getElementById('section-' + s).classList.add('hidden');
        document.getElementById('tab-' + s).classList.replace('tab-active', 'tab-inactive');
      });
      document.getElementById('section-' + name).classList.remove('hidden');
      document.getElementById('tab-' + name).classList.replace('tab-inactive', 'tab-active');
      window.scrollTo({top: 0, behavior: 'smooth'});
    }

    async function init() {
      showPopup(); // Munculkan pop-up saat pertama dibuka
      try {
        document.getElementById('f-tgl').value = localISODate();
        const nJson = await fetch(WEB_URL + '?action=names').then(r => r.json());
        const sel = document.getElementById('f-nama');
        nJson.data.forEach(p => {
          const o = new Option(p.nama, p.nama);
          o.dataset.klp = p.kelompok;
          sel.add(o);
        });
        sel.onchange = (e) => document.getElementById('f-klp').value = e.target.options[e.target.selectedIndex].dataset.klp || '';
        await loadReports();
      } catch (e) { console.error(e); }
    }

    async function loadReports() {
      const rJson = await fetch(WEB_URL + '?action=reports&t=' + Date.now()).then(r => r.json());
      DB = rJson.data || [];
      updateUI();
    }

    function filterRank(v) {
      currentRankFilter = v;
      ['all', 'Ikhwah', 'Akhwat'].forEach(id => {
        const el = document.getElementById('filter-' + id);
        el.classList.toggle('filter-active', id === v);
        el.classList.toggle('filter-inactive', id !== v);
      });
      updateUI();
    }

    function resetHistoryFilter() {
      document.getElementById('history-date-filter').value = '';
      historyPage = 1;
      updateUI();
    }

    function renderPagination(containerId, totalItems, currentPage, setPageFunc) {
      const totalPages = Math.ceil(totalItems / itemsPerPage);
      const container = document.getElementById(containerId);
      if (totalPages <= 1) { container.innerHTML = ''; return; }
      container.innerHTML = `
        <button onclick="${setPageFunc}(${currentPage - 1})" class="btn-pagination" ${currentPage === 1 ? 'disabled' : ''}>
          <i class="fas fa-chevron-left"></i>
        </button>
        <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Hlm ${currentPage} / ${totalPages}</span>
        <button onclick="${setPageFunc}(${currentPage + 1})" class="btn-pagination" ${currentPage === totalPages ? 'disabled' : ''}>
          <i class="fas fa-chevron-right"></i>
        </button>
      `;
    }

    function setRecentPage(p) { recentPage = p; updateUI(); }
    function setHistoryPage(p) { historyPage = p; updateUI(); }

    function updateUI() {
      const hariIni = localISODate();
      const totalLapHariIni = DB.filter(r => r.tanggal.split('T')[0] === hariIni).length;
      const rekap = {};
      DB.forEach(r => { 
        if (!rekap[r.nama_lengkap]) rekap[r.nama_lengkap] = { nama: r.nama_lengkap, kelompok: r.kelompok, total_juz: 0 };
        rekap[r.nama_lengkap].total_juz += (parseFloat(r.jumlah_juz) || 0); 
      });
      const khatamCount = Object.values(rekap).filter(v => v.total_juz >= 30).length;
      document.getElementById('stat-total').textContent = DB.length;
      document.getElementById('stat-today').textContent = totalLapHariIni;
      document.getElementById('stat-khatam').textContent = khatamCount;
      const totalJuz = DB.reduce((s, r) => s + (parseFloat(r.jumlah_juz) || 0), 0);
      const prog = Math.min(100, (totalJuz / 30) * 100);
      document.getElementById('prog-pct').textContent = prog.toFixed(1) + '%';
      document.getElementById('prog-bar').style.width = prog + '%';

      const recentStart = (recentPage - 1) * itemsPerPage;
      const recentItems = DB.slice(recentStart, recentStart + itemsPerPage);
      renderPagination('recent-pagination', DB.length, recentPage, 'setRecentPage');
      document.getElementById('recent-list').innerHTML = recentItems.map(r => `
        <div class="flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100">
          <div class="flex items-center gap-3">
             <div class="w-10 h-10 rounded-full bg-white flex items-center justify-center text-primary-theme shadow-sm border border-slate-100"><i class="fas ${r.kelompok==='Ikhwah'?'fa-mars text-blue-500':'fa-venus text-pink-500'}"></i></div>
             <div>
                <div class="font-bold text-slate-800">${escapeHtml(r.nama_lengkap)}</div>
                <div class="text-[11px] font-semibold text-slate-400 uppercase tracking-tighter">HARI KE- ${r.hari_ramadan} • ${r.jumlah_juz} JUZ</div>
             </div>
          </div>
          <div class="text-[10px] font-bold text-primary-theme bg-slate-100 px-3 py-1 rounded-full">${formatDate(r.tanggal)}</div>
        </div>`).join('') || '<p class="text-center text-slate-400 py-4">Belum ada laporan terbaru</p>';

      let participants = Object.values(rekap);
      if (currentRankFilter !== 'all') participants = participants.filter(p => p.kelompok === currentRankFilter);
      const sorted = participants.sort((a,b) => b.total_juz - a.total_juz).slice(0, 10);
      document.getElementById('lb-list').innerHTML = sorted.map((p, i) => `
        <div class="flex items-center justify-between p-4 hover:bg-slate-50 transition-colors rounded-xl ${i < 3 ? 'bg-amber-50/30' : ''}">
          <div class="flex items-center gap-4">
            <span class="w-6 text-sm font-bold text-slate-400 text-center">${i+1}</span>
            <div><span class="font-semibold text-slate-700">${escapeHtml(p.nama)}</span><div class="text-[9px] font-bold text-slate-400 uppercase">${p.kelompok}</div></div>
          </div>
          <div class="flex items-center gap-2"><span class="text-sm font-bold text-primary-theme">${p.total_juz.toFixed(1)}</span><span class="text-[10px] font-bold text-slate-300 uppercase">Juz</span></div>
        </div>`).join('') || '<p class="text-center text-slate-400 py-4">Tidak ada data</p>';

      const historyFilterValue = document.getElementById('history-date-filter').value;
      const filteredHist = historyFilterValue ? DB.filter(r => r.tanggal.split('T')[0] === historyFilterValue) : DB;
      const historyStart = (historyPage - 1) * itemsPerPage;
      const paginatedHistory = filteredHist.slice(historyStart, historyStart + itemsPerPage);
      renderPagination('history-pagination', filteredHist.length, historyPage, 'setHistoryPage');
      document.getElementById('hist-list').innerHTML = paginatedHistory.map(r => `
        <div class="card-dashboard p-5 border-l-4 ${r.kelompok === 'Ikhwah' ? 'border-l-blue-400' : 'border-l-pink-400'}">
          <div class="flex justify-between items-start mb-2">
            <div class="font-bold text-slate-800">${escapeHtml(r.nama_lengkap)}</div>
            <span class="text-[10px] font-black uppercase text-slate-300">${r.kelompok}</span>
          </div>
          <div class="flex items-center gap-4 text-xs font-bold">
            <span class="text-slate-500 uppercase"><i class="far fa-calendar-alt mr-1"></i> Hari Ke- ${r.hari_ramadan} • ${formatDate(r.tanggal)}</span>
            <span class="text-primary-theme uppercase"><i class="fas fa-book-open mr-1"></i> ${r.jumlah_juz} Juz</span>
          </div>
          ${r.catatan?`<div class="mt-3 text-xs italic text-slate-400 bg-slate-50 p-2 rounded-lg border border-slate-100">"${escapeHtml(r.catatan)}"</div>`:''}
        </div>`).join('') || '<p class="text-center text-slate-400 py-4">Belum ada riwayat</p>';
    }

    document.getElementById('report-form').onsubmit = async (e) => {
      e.preventDefault();
      const btn = document.getElementById('f-btn');
      btn.disabled = true; btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Mengirim...';
      const body = new URLSearchParams({
        action: 'create',
        nama_lengkap: document.getElementById('f-nama').value,
        kelompok: document.getElementById('f-klp').value,
        hari_ramadan: document.getElementById('f-hari').value,
        tanggal: document.getElementById('f-tgl').value,
        jumlah_juz: document.getElementById('f-juz').value,
        catatan: document.getElementById('f-catatan').value
      });
      try {
        await fetch(WEB_URL, { method: 'POST', body });
        location.reload();
      } catch (err) {
        alert("Gagal. Coba lagi.");
        btn.disabled = false;
        btn.innerHTML = '<i class="fas fa-paper-plane"></i> Kirim Laporan';
      }
    };
    init();
  </script>
</body>
</html>
